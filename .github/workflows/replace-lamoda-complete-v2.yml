name: Complete Lamoda ‚Üí Mismatch Replacement v2

on:
  workflow_dispatch:

jobs:
  replace:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Replace all lamoda references (CamelCase + Title + lowercase + UPPERCASE)
        run: |
          echo "üîÑ Starting complete replacement process..."
          
          # REPLACEMENT 1: CamelCase –∫–ª–∞—Å—Å –∏–º–µ–Ω–∞ (LamodaJob, LamodaCandidate, etc)
          echo "1Ô∏è‚É£ Replacing LamodaJob ‚Üí MismatchJob"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/LamodaJob/MismatchJob/g' {} \;
          
          echo "2Ô∏è‚É£ Replacing LamodaCandidate ‚Üí MismatchCandidate"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/LamodaCandidate/MismatchCandidate/g' {} \;
          
          echo "3Ô∏è‚É£ Replacing LamodaPlacement ‚Üí MismatchPlacement"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/LamodaPlacement/MismatchPlacement/g' {} \;
          
          echo "4Ô∏è‚É£ Replacing LamodaSync ‚Üí MismatchSync"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/LamodaSync/MismatchSync/g' {} \;
          
          echo "5Ô∏è‚É£ Replacing LamodaClient ‚Üí MismatchClient"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/LamodaClient/MismatchClient/g' {} \;
          
          # REPLACEMENT 2: Title Case (Lamoda ‚Üí Mismatch)
          echo "6Ô∏è‚É£ Replacing Lamoda ‚Üí Mismatch (Title Case)"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/Lamoda/Mismatch/g' {} \;
          
          # REPLACEMENT 3: lowercase (lamoda ‚Üí mismatch)
          echo "7Ô∏è‚É£ Replacing lamoda ‚Üí mismatch (lowercase)"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/lamoda/mismatch/g' {} \;
          
          # REPLACEMENT 4: UPPERCASE (LAMODA ‚Üí MISMATCH)
          echo "8Ô∏è‚É£ Replacing LAMODA ‚Üí MISMATCH (UPPERCASE)"
          find . -type f \( -name "*.py" -o -name "*.md" -o -name "*.yml" -o -name "*.yaml" -o -name "*.json" -o -name "*.txt" \) ! -path "./.git/*" ! -path "./.*" -exec sed -i 's/LAMODA/MISMATCH/g' {} \;
          
          echo "‚úÖ All replacements completed!"
          
          # Show summary
          echo ""
          echo "üìä SUMMARY OF CHANGES:"
          git diff --stat || echo "Checking for changes..."
      
      - name: Commit and push all changes
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "actions@github.com"
          
          # Add all changes
          git add -A
          
          # Check if there are changes to commit
          if git diff --cached --quiet; then
            echo "‚ÑπÔ∏è  No changes to commit"
          else
            echo "üìù Committing changes..."
            git commit -m "refactor: Complete lamoda ‚Üí mismatch replacement (CamelCase + Title + lowercase + UPPERCASE variants)"
            echo "üöÄ Pushing to master..."
            git push
            echo "‚úÖ Push successful!"
          fi
